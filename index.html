<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Big Motor Apps — Beranda</title>

<style>
  :root{
    --bg:#f4f5f7;
    --accent:#ff8a00;
    --card:#fff;
    --muted:#666;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);font-family:Inter,Segoe UI,Roboto,'Helvetica Neue',Arial;color:#222}

  /* HEADER */
  .header{
    background:var(--accent);
    padding:20px 18px 36px;
    color:#fff;
  }
  .header-title{
    font-size:20px;
    font-weight:700;
  }
  .user-row{
    display:flex;
    justify-content:space-between;
    margin-top:6px;
    font-size:14px;
    font-weight:500;
  }
  .datetime{
    font-size:13px;
    opacity:0.9;
    text-align:right;
  }

  /* Sticky Message */
  .sticky-card{
    background:var(--card);
    margin:-18px 16px 14px;
    padding:14px;
    border-radius:14px;
    box-shadow:0 3px 12px rgba(0,0,0,0.12);
    font-weight:600;
  }

  /* Grid Menu */
  .grid{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:18px;
    padding:16px;
  }
  .menu-item{
    background:var(--card);
    border-radius:18px;
    padding:18px 8px 14px;
    text-align:center;
    box-shadow:0 2px 10px rgba(0,0,0,0.08);
    cursor:pointer;
    transition:transform .15s ease;
  }
  .menu-item:hover{ transform:scale(.97); }
  .menu-item img{
    width:72px;height:72px;object-fit:contain;margin:auto;
  }
  .menu-item span{
    display:block;margin-top:10px;font-size:14px;font-weight:600;color:#111;
  }

  /* Custom Message Card */
  .custom-info-card{
    background:var(--card);
    margin:0 16px 90px;
    padding:16px;
    border-radius:16px;
    box-shadow:0 3px 10px rgba(0,0,0,0.10);
    font-size:14px;
    color:#444;
    line-height:1.5;
  }

  /* Navbar */
  .navbar{
    position:fixed;bottom:0;left:0;right:0;background:var(--card);
    display:flex;justify-content:space-around;padding:8px 0;
    border-top:1px solid #e6e6e6;box-shadow:0 -3px 10px rgba(0,0,0,0.06);
  }
  .nav-item{
    display:flex;flex-direction:column;align-items:center;
    font-size:11px;font-weight:500;color:#444;cursor:pointer;
  }
  .nav-item img{
    width:28px;height:28px;margin-bottom:4px;opacity:.75;
  }
  .nav-active{ color:var(--accent); }
  .nav-active img{ opacity:1; }
</style>
</head>
<body>

<!-- HEADER -->
<div class="header">
  <div class="header-title">Big Motor Apps</div>

  <div class="user-row">
    <div id="userName">Hai, Guest</div>
    <div class="datetime" id="dateTimeText">Memuat waktu...</div>
  </div>
</div>

<!-- Sticky Message -->
<div class="sticky-card" id="stickyMessage">Memuat...</div>

<!-- Menu Grid -->
<div class="grid">
  <div class="menu-item" onclick="go('penjualan.html')">
    <img src="assets/penjualan.png"><span>Penjualan</span>
  </div>
  <div class="menu-item" onclick="go('servis.html')">
    <img src="assets/servis.png"><span>Servis</span>
  </div>
  <div class="menu-item" onclick="go('stok_masuk.html')">
    <img src="assets/stok_masuk.png"><span>Stok Masuk</span>
  </div>
  <div class="menu-item" onclick="go('pengeluaran.html')">
    <img src="assets/pengeluaran.png"><span>Pengeluaran</span>
  </div>
  <div class="menu-item" onclick="go('laporan.html')">
    <img src="assets/laporan.png"><span>Laporan</span>
  </div>
  <div class="menu-item" onclick="go('more.html')">
    <img src="assets/more.png"><span>More</span>
  </div>
</div>

<!-- Custom Message -->
<div class="custom-info-card" id="customMessage">Memuat data...</div>

<!-- Navbar -->
<div class="navbar">
  <div class="nav-item nav-active" onclick="go('home.html')">
    <img src="assets/beranda.png">Beranda
  </div>
  <div class="nav-item" onclick="go('barang.html')">
    <img src="assets/barang.png">Barang
  </div>
  <div class="nav-item" onclick="go('riwayat.html')">
    <img src="assets/riwayat.png">Riwayat
  </div>
  <div class="nav-item" onclick="go('pengaturan.html')">
    <img src="assets/pengaturan.png">Pengaturan
  </div>
</div>

<script src="app.js"></script>

<script>
/* Navigation */
function go(url){ window.location.href = url; }

/* Load User */
function loadUser() {
  const user = localStorage.getItem("user")
      ? JSON.parse(localStorage.getItem("user"))
      : { name:"Guest" };
  document.getElementById("userName").textContent = `Hai, ${user.name}`;
}
loadUser();

/* Tanggal & Waktu Realtime */
function updateClock(){
  const now = new Date();
  const days = ["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];

  const hari = days[now.getDay()];
  const tgl  = now.toLocaleDateString("id-ID");
  const jam  = now.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"});

  document.getElementById("dateTimeText").textContent = `${hari}, ${tgl} — ${jam}`;
}
setInterval(updateClock,1000); updateClock();

/* Sticky Message + Custom Message */
getSettings().then(s=>{
  document.getElementById('stickyMessage').innerText = s.sticky_message || '';
  document.getElementById('customMessage').innerText = s.custom_message || 'Tidak ada informasi';
});
</script>

</body>
</html>
